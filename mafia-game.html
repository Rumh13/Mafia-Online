<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø§ÙÙŠØ§ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #ff9a3c;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .screen {
            display: none;
        }
        
        .active {
            display: block;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #ff9a3c;
        }
        
        input, select, button {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: none;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        input, select {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            text-align: center;
            border: 2px solid transparent;
        }
        
        input:focus, select:focus {
            border-color: #ff9a3c;
            outline: none;
        }
        
        button {
            background: #ff9a3c;
            color: #1a1a2e;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        button:hover {
            background: #ff7b00;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 155, 60, 0.3);
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .room-code {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 25px 0;
            font-size: 32px;
            font-weight: bold;
            letter-spacing: 5px;
            border: 2px solid #ff9a3c;
        }
        
        .players-list {
            margin: 25px 0;
        }
        
        .player-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .player-card.you {
            border-color: #ff9a3c;
            background: rgba(255, 155, 60, 0.2);
        }
        
        .player-card.host::after {
            content: " ğŸ‘‘";
        }
        
        .player-card.mafia {
            border-color: #ff4757;
        }
        
        .player-card.citizen {
            border-color: #2ed573;
        }
        
        .player-card.doctor {
            border-color: #3742fa;
        }
        
        .player-card.elder {
            border-color: #ffa502;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: right;
            line-height: 1.6;
        }
        
        .link-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }
        
        .link-box input {
            background: transparent;
            border: none;
            color: #333;
            font-weight: bold;
            text-align: center;
        }
        
        .game-info {
            text-align: center;
            margin: 15px 0;
            font-size: 18px;
            color: #ff9a3c;
        }
        
        .role-display {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-size: 20px;
            border: 2px solid #ff9a3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø§Ù„Ø´Ø§Ø´Ø© 1: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… -->
        <div class="screen active" id="screen1">
            <h1>ğŸ® Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø§ÙÙŠØ§</h1>
            
            <div class="instructions">
                <h3>ğŸ“‹ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨:</h3>
                <p>â€¢ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ§Ù†Ù‚Ø± "Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©"</p>
                <p>â€¢ Ø´Ø§Ø±Ùƒ Ø±Ø§Ø¨Ø· Ø§Ù„ØºØ±ÙØ© Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ</p>
                <p>â€¢ Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠÙ†Ø¶Ù… 4-6 Ù„Ø§Ø¹Ø¨ÙŠÙ†</p>
                <p>â€¢ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØªÙ…ØªØ¹ÙˆØ§ Ø¨Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©!</p>
            </div>
            
            <div class="input-group">
                <label for="playerName">Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨:</label>
                <input type="text" id="playerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" maxlength="15">
            </div>
            
            <button onclick="startGame()">ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
        </div>

        <!-- Ø§Ù„Ø´Ø§Ø´Ø© 2: Ø§Ù„ØºØ±ÙØ© -->
        <div class="screen" id="screen2">
            <h1>ğŸ‘¥ ØºØ±ÙØ© Ø§Ù„Ù„Ø¹Ø¨</h1>
            
            <div class="room-code">
                ğŸ”— Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©: <span id="roomCode">----</span>
            </div>
            
            <div class="instructions">
                <h3>ğŸ“¤ Ø´Ø§Ø±Ùƒ Ø§Ù„Ù„Ø¹Ø¨Ø©:</h3>
                <div class="link-box">
                    <input type="text" id="gameLink" readonly>
                    <button onclick="copyLink()" style="background: #2ed573;">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                </div>
                <p>Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ø¹Ù„Ø§Ù‡ ÙˆØ£Ø±Ø³Ù„Ù‡ Ù„Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</p>
            </div>

            <div class="game-info">
                ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†: <span id="playersCount">0</span>/6
            </div>
            
            <div class="players-list" id="playersList">
                <!-- Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙŠØ¸Ù‡Ø±ÙˆÙ† Ù‡Ù†Ø§ -->
            </div>

            <button onclick="beginGame()" id="startGameBtn" disabled>ğŸ¯ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
            <button onclick="leaveRoom()" style="background: #ff4757;">ğŸšª Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØºØ±ÙØ©</button>
        </div>

        <!-- Ø§Ù„Ø´Ø§Ø´Ø© 3: ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± -->
        <div class="screen" id="screen3">
            <h1>ğŸ­ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±</h1>
            
            <div class="role-display" id="yourRole">
                <!-- Ø¯ÙˆØ±Ùƒ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
            </div>
            
            <div class="players-list" id="rolesList">
                <!-- Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
            </div>
            
            <button onclick="showScreen('screen2')">â†© Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ±ÙØ©</button>
            <button onclick="restartGame()" style="background: #2ed573;">ğŸ”„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        let gameData = {
            players: [],
            currentPlayer: null,
            roomCode: null,
            gameInterval: null
        };

        // Ø£Ø³Ù…Ø§Ø¡ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„ÙˆÙ‡Ù…ÙŠÙŠÙ†
        const fakeNames = ['Ø£Ø­Ù…Ø¯', 'Ù…Ø­Ù…Ø¯', 'ÙØ§Ø·Ù…Ø©', 'Ø®Ø§Ù„Ø¯', 'Ø³Ø§Ø±Ø©', 'Ø¹Ù„ÙŠ', 'Ù†ÙˆØ±', 'ÙŠÙˆØ³Ù', 'Ù„Ù…Ù‰', 'Ø¹Ù…Ø±'];

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function startGame() {
            const playerName = document.getElementById('playerName').value.trim();
            if (!playerName) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ');
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯
            gameData.currentPlayer = {
                id: generateId(),
                name: playerName,
                isHost: true,
                role: null
            };

            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… ØºØ±ÙØ©
            gameData.roomCode = generateRoomCode();
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
            gameData.players = [gameData.currentPlayer];
            
            // Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆÙ‡Ù…ÙŠÙŠÙ†
            addFakePlayers();
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø´Ø§Ø´Ø© Ø§Ù„ØºØ±ÙØ©
            showScreen('screen2');
            updateGameLink();
            updatePlayersList();
            
            // Ø¨Ø¯Ø¡ Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¬Ø¯Ø¯
            startGameSimulation();
        }

        // Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆÙ‡Ù…ÙŠÙŠÙ†
        function addFakePlayers() {
            const fakeCount = Math.floor(Math.random() * 2) + 2; // 2-3 Ù„Ø§Ø¹Ø¨ÙŠÙ†
            let added = 0;
            
            while (added < fakeCount && gameData.players.length < 6) {
                const name = getRandomName();
                if (!gameData.players.find(p => p.name === name)) {
                    gameData.players.push({
                        id: generateId(),
                        name: name,
                        isHost: false,
                        isFake: true,
                        role: null
                    });
                    added++;
                }
            }
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        function getRandomName() {
            const availableNames = fakeNames.filter(name => 
                !gameData.players.find(p => p.name === name)
            );
            return availableNames[Math.floor(Math.random() * availableNames.length)] || 'Ù„Ø§Ø¹Ø¨';
        }

        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¬Ø¯Ø¯
        function startGameSimulation() {
            gameData.gameInterval = setInterval(() => {
                if (gameData.players.length < 6 && Math.random() < 0.4) {
                    const name = getRandomName();
                    gameData.players.push({
                        id: generateId(),
                        name: name,
                        isHost: false,
                        isFake: true,
                        role: null
                    });
                    updatePlayersList();
                }
            }, 4000);
        }

        // ØªØ­Ø¯ÙŠØ« Ø±Ø§Ø¨Ø· Ø§Ù„Ù„Ø¹Ø¨Ø©
        function updateGameLink() {
            const link = window.location.href.split('?')[0] + '?room=' + gameData.roomCode;
            document.getElementById('gameLink').value = link;
            document.getElementById('roomCode').textContent = gameData.roomCode;
        }

        // Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
        function copyLink() {
            const linkInput = document.getElementById('gameLink');
            linkInput.select();
            navigator.clipboard.writeText(linkInput.value);
            alert('âœ… ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ØºØ±ÙØ©!\n\nØ´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ Ù„ÙŠØªÙ…ÙƒÙ†ÙˆØ§ Ù…Ù† Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù….');
        }

        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
        function updatePlayersList() {
            const playersList = document.getElementById('playersList');
            playersList.innerHTML = '';
            
            gameData.players.forEach(player => {
                const playerDiv = document.createElement('div');
                playerDiv.className = `player-card ${player.id === gameData.currentPlayer.id ? 'you' : ''} ${player.isHost ? 'host' : ''}`;
                
                let playerInfo = `${player.name}`;
                if (player.id === gameData.currentPlayer.id) {
                    playerInfo += ' ğŸ‘¤ (Ø£Ù†Øª)';
                }
                if (player.isHost) {
                    playerInfo += ' ğŸ‘‘';
                }
                
                playerDiv.textContent = playerInfo;
                playersList.appendChild(playerDiv);
            });

            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
            document.getElementById('playersCount').textContent = gameData.players.length;
            
            // ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¨Ø¯Ø¡
            const startBtn = document.getElementById('startGameBtn');
            if (gameData.players.length >= 4) {
                startBtn.disabled = false;
                startBtn.textContent = `ğŸ¯ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© (${gameData.players.length}/6)`;
            } else {
                startBtn.disabled = true;
                startBtn.textContent = `â³ Ø§Ù†ØªØ¸Ø± Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¢Ø®Ø±ÙŠÙ† (${gameData.players.length}/4)`;
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        function beginGame() {
            if (gameData.players.length < 4) {
                alert('âŒ ÙŠØ­ØªØ§Ø¬ 4 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©');
                return;
            }

            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©
            clearInterval(gameData.gameInterval);
            
            // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
            distributeRoles();
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
            showScreen('screen3');
            displayRoles();
        }

        // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
        function distributeRoles() {
            const roles = getRolesForPlayerCount(gameData.players.length);
            const shuffledRoles = shuffleArray([...roles]);
            
            gameData.players.forEach((player, index) => {
                player.role = shuffledRoles[index];
            });
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
        function getRolesForPlayerCount(count) {
            const configs = {
                4: ['mafia', 'citizen', 'doctor', 'elder'],
                5: ['mafia', 'mafia', 'citizen', 'doctor', 'elder'],
                6: ['mafia', 'mafia', 'citizen', 'citizen', 'doctor', 'elder']
            };
            return configs[count] || configs[4];
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
        function displayRoles() {
            const yourRoleDiv = document.getElementById('yourRole');
            const rolesListDiv = document.getElementById('rolesList');
            
            // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
            const currentPlayer = gameData.players.find(p => p.id === gameData.currentPlayer.id);
            
            if (currentPlayer) {
                const roleName = getRoleName(currentPlayer.role);
                const roleDescription = getRoleDescription(currentPlayer.role);
                
                yourRoleDiv.innerHTML = `
                    <h2>ğŸ¯ Ø¯ÙˆØ±Ùƒ: ${roleName}</h2>
                    <p>${roleDescription}</p>
                `;
                
                // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ø§Ø³ Ù„Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±
                yourRoleDiv.className = `role-display player-card ${currentPlayer.role}`;
            }
            
            // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
            rolesListDiv.innerHTML = '';
            gameData.players.forEach(player => {
                const playerDiv = document.createElement('div');
                playerDiv.className = `player-card ${player.id === gameData.currentPlayer.id ? 'you' : ''} ${player.role}`;
                
                let playerInfo = `${player.name}`;
                if (player.id === gameData.currentPlayer.id) {
                    playerInfo += ' ğŸ‘¤ (Ø£Ù†Øª)';
                }
                if (player.isHost) {
                    playerInfo += ' ğŸ‘‘';
                }
                
                playerDiv.innerHTML = `
                    <div><strong>${playerInfo}</strong></div>
                    <div>Ø§Ù„Ø¯ÙˆØ±: ${player.id === gameData.currentPlayer.id ? getRoleName(player.role) : '???'}</div>
                `;
                
                rolesListDiv.appendChild(playerDiv);
            });
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±
        function getRoleName(role) {
            const roleNames = {
                mafia: 'Ù…Ø§ÙÙŠØ§ ğŸ—¡ï¸',
                citizen: 'Ù…ÙˆØ§Ø·Ù† ğŸ‘¨â€ğŸŒ¾',
                doctor: 'Ø¯ÙƒØªÙˆØ± ğŸ¥',
                elder: 'Ø´Ø§ÙŠØ¨ ğŸ§“'
            };
            return roleNames[role] || role;
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆØµÙ Ø§Ù„Ø¯ÙˆØ±
        function getRoleDescription(role) {
            const descriptions = {
                mafia: 'Ø£Ù†Øª Ù…Ù† Ø§Ù„Ù…Ø§ÙÙŠØ§! Ù‚Ù… Ø¨Ù‚ØªÙ„ Ø§Ù„Ù…ÙˆØ§Ø·Ù†ÙŠÙ† Ù„ÙŠÙ„Ø§Ù‹ Ø¯ÙˆÙ† Ø£Ù† ÙŠÙƒØªØ´ÙÙˆÙƒ.',
                citizen: 'Ø£Ù†Øª Ù…ÙˆØ§Ø·Ù†! Ø­Ø§ÙˆÙ„ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…Ø§ÙÙŠØ§ ÙˆØ§Ù„ØªØ®Ù„Øµ Ù…Ù†Ù‡Ù… Ø¨Ø§Ù„ØªØµÙˆÙŠØª.',
                doctor: 'Ø£Ù†Øª Ø§Ù„Ø¯ÙƒØªÙˆØ±! ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù†Ù‚Ø§Ø° Ø´Ø®Øµ ÙˆØ§Ø­Ø¯ ÙƒÙ„ Ù„ÙŠÙ„Ø© Ù…Ù† Ø§Ù„Ù‚ØªÙ„.',
                elder: 'Ø£Ù†Øª Ø§Ù„Ø´Ø§ÙŠØ¨! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙˆÙŠØ© Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ ÙƒÙ„ Ù„ÙŠÙ„Ø©.'
            };
            return descriptions[role] || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ±.';
        }

        // Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØºØ±ÙØ©
        function leaveRoom() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØºØ±ÙØ©ØŸ')) {
                clearInterval(gameData.gameInterval);
                gameData.players = [];
                gameData.currentPlayer = null;
                showScreen('screen1');
            }
        }

        // Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function restartGame() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŸ')) {
                clearInterval(gameData.gameInterval);
                gameData.players = [];
                gameData.roomCode = generateRoomCode();
                gameData.currentPlayer.isHost = true;
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                gameData.players = [gameData.currentPlayer];
                addFakePlayers();
                
                showScreen('screen2');
                updateGameLink();
                updatePlayersList();
                startGameSimulation();
            }
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function generateId() {
            return Math.random().toString(36).substring(2, 15);
        }

        function generateRoomCode() {
            return Math.random().toString(36).substring(2, 6).toUpperCase();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ - Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ room ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const roomCode = urlParams.get('room');
            
            if (roomCode) {
                document.getElementById('playerName').focus();
            }
        });
    </script>
</body>
</html>
